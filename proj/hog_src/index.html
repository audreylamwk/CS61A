<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta name="description" content="CS 61A: Structure and Interpretation of Computer Programs" />
  <meta name="keywords" content="CS 61A, Computer Science, CS, 61A, Programming, John DeNero, Berkeley, EECS" />
  <meta name="author" content="Hany Farid, John DeNero" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="../../assets/js/hl.js"></script>
  <script>
    // we aren't registering builtins since
    //      (1) they don't render differently in the current CSS from other names
    //      (2) it's a mess to list all of them. You can extract from the site but that takes effort
    // if (1) ceases to be true, (2) might be worth the effort. For now, we're leaving as is
    hljsRegister({
      'keyword': "define if cond and or let begin lambda mu quote delay cons-stream set! quasiquote unquote unquote-splicing define-macro"
    });
    hljs.initHighlightingOnLoad();
  </script>
  <script src="../../assets/js/dark-mode.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Inconsolata|Roboto:300,400,500|Work+Sans:400,700">
  <link rel="stylesheet" href="../../assets/css/style.css">
  <link rel="stylesheet" href="../../assets/css/mono-blue.css">
  <link rel="icon" href="../../assets/images/favicon.ico">



  <link href="../../assets/css/project.css" rel="stylesheet" type="text/css">


  <title>
    Project 1: The Game of Hog | CS 61A Fall 2020
  </title>
</head>

<body id="index" class="home">
  <nav class="navbar navbar-default navbar-static-top">
    <div class="container noselect">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
          data-target="#navbar-collapse-section">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../">
          <img style="max-width:60px; margin-top: -20px;" class="logo" src="../../assets/images/logo.png" />
        </a>
      </div>

      <div class="collapse navbar-collapse" id="navbar-collapse-section">
        <ul class="nav navbar-nav navbar-right">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown"
              aria-haspopup="true" aria-expanded="false">
              Staff
            </a>
            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
              <li><a href="../../instructor.html">Instructors</a></li>
              <li><a href="../../TAs.html">TAs</a></li>
              <li><a href="../../tutors.html">Tutors</a></li>
            </ul>
          </li>
          <li><a href="../../resources.html">Resources</a></li>
          <li><a href="../../articles/about.html">Syllabus</a></li>
          <li><a href="https://code.cs61a.org">Code</a></li>
          <li><a href="http://tutor.cs61a.org" target="_blank">Tutor</a></li>
          <li>
            <a style="color:white; font-size: 15px;vertical-align: middle" href="https://github.com/ChillyHigh/CS61A-CN"
              title="前往仓库" target="_blank">
              <img height="21px" src="https://cdn.jsdelivr.net/npm/simple-icons@v9/icons/github.svg" alt="GitHub"
                style="filter: invert(1) brightness(1000%);">
              <span style="vertical-align: middle;padding-left: 0.5rem;"> CS61A-CN</span>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <main id="content" class="container">

    <div class='row'>
      <div class='col-md-9'>
        <header>
          <h1>
            项目1: Hog 游戏
            <br>
            <small>Project 1: The Game of Hog</small>
            <br>


            <ul class="inline-block list-inline">
              <li><a href="hog.zip" class="label label-outline">hog.zip</a></li>
            </ul>


          </h1>
        </header>

        <h3><a href="EN.html">查看英文原文</a></h3>
        <div class="haiku">
          <blockquote>
            <p><img class="img-responsive center-block" src="assets/icon.gif" alt="5-sided die"></p>

            <cite>
              I know! I'll use my<br />
              Higher-order functions to<br />
              Order higher rolls.
            </cite>
          </blockquote>
        </div>


        <h2 id="introduction">介绍</h2>


        <blockquote>
          <p><strong>重要提交说明：</strong> 为了获得全部分数，请：</p>

          <ul>
            <li>在 <strong>9月8日星期二</strong> 前完成 Phase 1（价值1分）。</li>
            <li>在 <strong>9月11日星期五</strong> 前完成所有阶段。</li>
          </ul>

          <p>虽然 Phase 1 的截止日期仅比其余部分早几天，但你不应该推迟完成 Phase 1。我们建议尽快开始并完成第1阶段。</p>

          <p>整个项目可以与伙伴一起完成。</p>

          <p>如果在 <strong>9月10日星期四</strong> 前提交整个项目，可以获得1个额外积分。</p>
        </blockquote>

        <p>在这个项目中，你将开发一个骰子游戏 Hog 的模拟器并研究多种策略。
          你需要结合使用<em>控制语句</em>和<em>高阶函数</em>，具体内容参见<a href="https://composingprograms.netlify.app/">课本</a>的第1.2到1.6节。
        </p>


        <h3 id="rules">规则</h3>


        <p>在 Hog 游戏中，两名玩家轮流进行回合，目标是成为第一个在回合结束时总分达到至少 100 分的玩家。在每个回合中，当前玩家选择要掷的骰子数量，最多可以选择 10
          个。该玩家本回合的得分是所有骰子结果的总和。然而，掷太多骰子的玩家有风险：</p>

        <ul>
          <li><strong>Pig Out</strong>。如果任何一个骰子的结果是 1，当前玩家本回合的得分为 1。</li>
        </ul>

        <button id='toggle-1' class='btn btn-outline btn-lg alwaystoggle toggle'>
          示例<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-1">

          <ul>
            <li><em>示例 1</em>: 当前玩家掷7次骰子，其中5次是1。则他的最终分数为1</li>
            <li><em>示例 2</em>: 当前玩家掷4次骰子，全部都是3。因为Pig Out没有发生，他的最终分数为12</li>
          </ul>

        </div>

        <p>在正常的 Hog 游戏中，这些就是所有的规则。为了增加游戏的趣味性，我们将加入一些特殊规则：</p>

        <ul>
          <li><strong>Free Bacon</strong>。选择掷零个骰子的玩家将获得 <code>k+3</code> 分，其中 <code>k</code> 是 π 的小数点后第 <code>n</code>
            位数字，<code>n</code> 是对手的总分。作为一个特殊情况，如果对手的得分是 <code>n = 0</code>，那么 <code>k = 3</code>（π 小数点前的数字）。
          </li>
        </ul>

        <button id='toggle-2' class='btn btn-outline btn-lg alwaystoggle toggle'>
          示例<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-2">

          <ul>
            <li><em>示例 1</em>：对手的得分为 0，当前玩家掷零个骰子。当前玩家将获得 <code>3 + 3 = 6</code> 分。</li>
            <li><em>示例 2</em>：对手的得分为 1，当前玩家掷零个骰子。当前玩家将获得 <code>1 + 3 = 4</code> 分。</li>
            <li><em>示例 3</em>：对手的得分为 2，当前玩家掷零个骰子。当前玩家将获得 <code>4 + 3 = 7</code> 分。</li>
            <li><em>示例 4</em>：对手的得分为 42，当前玩家掷零个骰子。当前玩家将获得 <code>9 + 3 = 12</code> 分。</li>
          </ul>

        </div>
        <ul>
          <li><strong>Swine Align</strong>。在本回合得分加到当前玩家的总分后，如果两名玩家的得分都为正且当前玩家的得分与对手的得分的最大公约数（GCD）至少为10，则当前玩家再进行一次回合。
          </li>
        </ul>

        <button id='toggle-3' class='btn btn-outline btn-lg alwaystoggle toggle'>
          示例<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-3">

          <ul>
            <li><em>示例 1</em>：在第一个玩家回合结束时，两名玩家的得分分别为8和36。得分的最大公约数为4，因此第一个玩家不会因为 Swine Align 规则而再进行一次回合。</li>
            <li><em>示例 2</em>：在第一个玩家回合结束时，两名玩家的得分分别为20和30。得分的最大公约数为10，因此第一个玩家会再进行一次回合。</li>
            <li><em>示例
                3</em>：在第一个玩家回合结束时，两名玩家的得分分别为24和36。得分的最大公约数为12，因此第一个玩家会再进行一次回合。第一个玩家掷出12点，得分变为36和36。得分的最大公约数为36，因此第一个玩家会再进行一次回合。
            </li>
            <li><em>示例 4</em>：在第一个玩家回合结束时，两名玩家的得分分别为15和0。Swine Align 规则仅在两名玩家的得分都为正时适用（不为零），因此第一个玩家不会因为 Swine Align
              规则而再进行一次回合。</li>
          </ul>

        </div>

        <ul>
          <li><strong>Pig Pass</strong>。在本回合得分加到当前玩家的总分后，如果当前玩家的得分低于对手的得分且两者之间的差值小于3，则当前玩家再进行一次回合。</li>
        </ul>

        <button id='toggle-4' class='btn btn-outline btn-lg alwaystoggle toggle'>
          示例<noscript> (启用 JavaScript)</noscript>
        </button>
        <div class="solution toggle-4">

          <ul>
            <li><em>示例 1</em>：回合结束时，当前玩家的得分为11，对手的得分为10，。由于11 > 10，当前玩家不会因为 Pig Pass 规则而再进行一次回合。</li>
            <li><em>示例 2</em>：回合结束时，当前玩家的得分为7，对手的得分为10。因为 <code>10 - 7 = 3 >= 3</code>，当前玩家不会因为 Pig Pass
              规则而再进行一次回合。</li>
            <li><em>示例 3</em>：回合结束时，当前玩家的得分为28，对手的得分为30。因为 <code>30 - 28 = 2 < 3</code>，当前玩家会再进行一次回合。</li>
            <li><em>示例 4</em>：回合结束时，当前玩家的得分为28，对手的得分为30。与示例3类似，当前玩家会再进行一次回合。如果当前玩家掷出1点，得分变为29，Pig Pass
              规则再次生效，当前玩家会再进行一次回合。</li>
          </ul>

        </div>



        <h2 id="final-product">最终成果</h2>

        <p>我们的项目解决方案可以在 <a href="https://hog.cs61a.org">hog.cs61a.org</a> 上试玩！当你完成这个项目时，你将自己实现这个游戏的一个重要部分。</p>

        <h2 id="download-starter-files">下载初始文件</h2>

        <p>要开始，请下载所有项目代码的 <a href="hog.zip">zip 压缩包</a>。以下是压缩包中所有文件的列表。不过，你只需要修改 <code>hog.py</code> 文件。</p>

        <ul>
          <li><code>hog.py</code>：Hog 游戏的初始实现</li>
          <li><code>dice.py</code>：掷骰子的函数</li>
          <li><code>hog_gui.py</code>：Hog 游戏的图形用户界面（GUI）</li>
          <li><code>ucb.py</code>：CS 61A 的实用函数</li>
          <li><code>ok</code>：CS 61A 自动评分器</li>
          <li><code>tests</code>：<code>ok</code> 使用的测试目录</li>
          <li><code>gui_files</code>：Web GUI 使用的各种文件目录</li>
        </ul>

        <h2 id="logistics">项目安排与提交</h2>

        <!-- <p>Remember that you can earn an additional bonus point by submitting the
        project at least 24 hours before the deadline.</p> -->

        <p>该项目总共25分。22分用于正确性，1分用于在截止日期前提交 Phase 1，2分用于整体<a href="../../articles/composition.html">组成</a>。
        </p>

        <p>你需要提交以下文件：</p>

        <ul>
          <li><code>hog.py</code></li>
        </ul>

        <p>你不需要修改或提交任何其他文件来完成该项目。要提交项目，请运行以下命令：</p>

        <pre><code>python3 ok --submit</code></pre>

        <p>你可以在 <a href="http://ok.cs61a.org">Ok dashboard</a> 上查看你的提交。</p>

        <p>对于我们要求你完成的函数，可能会提供一些初始代码。如果你不想使用这些代码，
          可以随意删除和修改。你也可以根据需要添加新的函数定义。</p>

        <p>但是，请<b>不要</b>修改任何其他函数。这样做可能会导致你的代码在我们的自动评分器测试中失败。
          另外，请不要更改任何函数签名（名称、参数顺序或参数数量）。</p>

        <p>在整个项目过程中，你应该测试代码的正确性。经常测试是一个好习惯，这样可以很容易地隔离任何问题。
          但是，你不应该测试<i>太</i>频繁，以至于没有时间思考问题。</p>

        <p>我们提供了一个名为 <code>ok</code> 的<b>自动评分器</b>，帮助你测试代码并跟踪进度。第一次运行自动评分器时，
          你将要<b>通过浏览器登录你的 Ok 账户</b>。请这样做。每次运行 <code>ok</code> 时，它都会备份你的工作和进度到我们的服务器上。</p>

        <p><code>ok</code> 的主要目的是测试你的实现。</p>

        <!-- <p>First, some of the test cases are <i>locked</i>. To unlock tests, run the
following command from your terminal:</p>

<pre><code>python3 ok -u</code></pre>

<p>This command will start an interactive prompt that looks like:</p>

<pre>
=====================================================================
Assignment: The Game of Hog
Ok, version ...
=====================================================================

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Unlocking tests

At each "? ", type what you would expect the output to be.
Type exit() to quit

---------------------------------------------------------------------
Question 0 &gt; Suite 1 &gt; Case 1
(cases remaining: 1)

&gt;&gt;&gt; Code here
?
</pre>

<p>At the <code>?</code>, you can type what you expect the output to be. If you
are correct, then this test case will be available the next time you run the
autograder.</p>

<p>The idea is to understand <i>conceptually</i> what your program should do
first, before you start writing any code.</p>

<p>Once you have unlocked some tests and written some code, you can check the
correctness of your program using the tests that you have unlocked:</p>

<pre>python3 ok</pre>

<p>Most of the time, you will want to focus on a particular question. Use the
<code>-q</code> option as directed in the problems below.</p>  -->

        <!-- <p>Second, there may be some test cases that are <i>hidden</i>. These test cases are
<b>not</b> run by the command:</p> -->

        <!--<pre>python3 ok</pre>-->

        <!-- <p>They are only run when you submit:</p> -->

        <!-- <pre>python3 ok --submit</pre> -->

        <!-- <p> We keep test cases hidden to ensure that you write your code with the intention
of solving the question at hand, not purely to pass the given tests. The hidden
tests will be run when you submit your project. You will receive an email with part of
the autograder results after submitting. However, the autograder has a 15 minute
cooldown period. If you submit before 15 minutes have passed, the autograder will
not run.</p> -->

        <p>我们建议你在<b>完成每个问题后提交</b>。只有你最后一次提交的内容会被评分。对于我们来说，拥有更多的代码备份也是有用的，以防你提交遇到问题。<b>如果你忘记提交，你的最后一次备份将自动转换为提交内容。</b>
        </p>
        <!--<p>After you run this command, you will receive an email (to the address-->
        <!--that you used to sign up for Ok) that has the output from all <i>failed</i>-->
        <!--unlocked tests, including hidden tests, along with your score at the bottom. You-->
        <!--can continue submitting until you pass all the tests. However, you will receive-->
        <!--<b>at most one email every half hour</b>.</p>-->

        <!--<p>This buffer period is meant for you and your partner to try and understand-->
        <!--where your error comes from, and take some time to think through your code. We-->
        <!--encourage you to do this for all projects.</p>-->

        <!---
<p>If you are trying to debug a test failure, you can launch an interactive session
after the test is run with:</p>

<pre><code>python3 ok &#x2d;q 05 &#x2d;i</code></pre>

<p>This will run the tests and launch an interactive session if a test does not
pass.</p>

<pre><code>=====================================================================
Assignment: Project 1: Hog
Ok, version ....
=====================================================================

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Running tests

&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;
Question ... &gt; Suite ... &gt; Case ...

&gt;&gt;&gt; the_test()
"expected value"

# Error: expected
#     "expected value"
# but got
#     None

# Interactive console. Type exit() to quit
&gt;&gt;&gt;</code></pre>
-->


        <!--- <p>The <code>tests</code> folder is used to store autograder tests, so
<b>do not modify it</b>. You may lose all your unlocking progress if you
do. If you need to get a fresh copy, you can download the
<a href="hog.zip">zip archive</a> and copy it over, but you
will need to start unlocking from scratch.</p> -->

        <p>如果你不希望我们记录你的工作备份或进度信息，你可以运行

        <pre>python3 ok --local</pre>

        使用此选项时，不会有任何信息发送到我们的课程服务器。

        如果你想交互式地测试你的代码，你可以运行

        <pre>python3 ok -q [问题编号] -i --local</pre>

        插入适当的问题编号（例如 <code>01</code>）。这将运行该问题的测试，遇到第一个失败的测试时，你可以交互式地测试你编写的函数。</p>

        <p>你也可以通过在 OK 中编写

        <pre>print("DEBUG:", x)</pre>

        来使用调试打印功能，这将在你的终端中生成输出，而不会因为额外的输出导致 OK 测试失败。</p>

        <h2 id="graphical-user-interface">图形用户界面</h2>

        <p>我们为你提供了一个<strong>图形用户界面</strong>（简称 GUI）。目前，它还不能工作，因为你还没有实现游戏逻辑。完成 <code>play</code> 函数，这样你就能游玩一个完全互动的 Hog
          游戏！</p>

        <p>完成后，你可以在终端中运行以下命令来启动 GUI：</p>

        <pre><code>python3 hog_gui.py</code></pre>

        <p>该 GUI 是一个<a href="https://github.com/Cal-CS-61A-Staff/hog-gui">托管在 Github 上的开源项目</a>。</p>


        <h2 id="phase-1-simulator">Phase 1：模拟器</h2>

        <p>在第一阶段，你将开发一个 Hog 游戏的模拟器。</p>

        <h3 id="problem-0-0-pt">Problem 0 (0 分)</h3>

        <p><code>dice.py</code> 文件使用无参数函数来表示骰子。这些函数是非纯函数，因为它们每次调用时可能会有不同的返回值。<code>dice.py</code> 的文档描述了项目中使用的两种不同类型的骰子：
        </p>

        <ul>
          <li>公平骰子，意味着它们以相等的概率产生每个可能的结果。例如：<code>six_sided</code>。</li>
          <li>测试用骰子，循环投出传入 <code>make_test_dice</code> 函数的固定值序列。</li>
        </ul>

        <p>在编写代码之前，请阅读 <code>dice.py</code> 文件，并通过解锁以下测试来检查你的理解。</p>

        <pre><code class="hljs">python3 ok -q 00 -u --local</code></pre>

        <p>输出内容类似于：</p>
        <pre><code>=====================================================================
Assignment: Project 1: Hog
Ok, version v1.5.2
=====================================================================

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Unlocking tests

At each &quot;? &quot;, type what you would expect the output to be.
Type exit() to quit

&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;&#x2d;
Question 0 &gt; Suite 1 &gt; Case 1
(cases remaining: 1)

&gt;&gt;&gt; test_dice = make_test_dice(4, 1, 2)
&gt;&gt;&gt; test_dice()
?</code></pre>

        <p>你需要首先根据上述描述弄清楚 <code>test_dice</code> 做了什么。再输入你期望的输出结果。</p>

        <p>你可以通过输入 <code>exit()</code> 来退出解锁程序。<strong>在 Windows 上使用 Ctrl-C 退出解锁程序已知会导致问题，因此请避免这样做。</strong></p>

        <button id='toggle-5' class='btn btn-outline btn-lg alwaystoggle toggle'>
          提示视频<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-5">

          <h3 id="problem-0-hint-video">Problem 0 提示视频</h3>

          <p>这个视频为解决 Hog 游戏第一阶段的问题提供了一些有用的指导。
            <br>

            <iframe width="560" height="315"
              src="//player.bilibili.com/player.html?isOutside=true&aid=427281261&bvid=BV1s3411G7yM&cid=753493984&p=10&autoplay=0"
              scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"></iframe>
        </div>
        </p>


        <h3 id="problem-1-2-pt">Problem 1 (2 分)</h3>
        <p>在 <code>hog.py</code> 文件中实现 <code>roll_dice</code> 函数。它接受两个参数：一个名为 <code>num_rolls</code> 的正整数，表示要掷骰子的次数，以及一个
          <code>dice</code> 函数。它返回在一个回合中掷骰子该次数所获得的分数：要么是结果的总和，要么是 1（<em>Pig Out</em>）。
        </p>

        <blockquote>
          <p>Pig Out 规则:</p>
        </blockquote>

        <ul>
          <li>
            <p><strong>Pig Out</strong>。如果任何一个骰子的结果是 1，当前玩家本回合的得分为 1。</p>

            <button id='toggle-6' class='btn btn-outline btn-lg alwaystoggle toggle'>
              示例<noscript> (enable JavaScript)</noscript>
            </button>
            <div class="solution toggle-6">

              <ul>
                <li><em>示例 1</em>: 当前玩家掷7次骰子，其中5次是1。则他的最终分数为1</li>
                <li><em>示例 2</em>: 当前玩家掷4次骰子，全部都是3。因为Pig Out没有发生，他的最终分数为12</li>
              </ul>

            </div>
          </li>
        </ul>

        <p>可以调用 <code>dice()</code>来获得掷一次骰子的结果。你应该在 <code>roll_dice</code> 函数体内调用 <code>dice()</code>
          <code>num_rolls</code> 次。<strong>即使在掷骰子过程中触发 <em>Pig Out</em>规则，也要记得调用 <code>dice()</code>
            <code>num_rolls</code> 次。</strong> 这样，你才能正确模拟所有骰子一起掷的情况。
        </p>

        <p><strong>理解问题</strong>：</p>
        <p>在编写代码之前，你需要解锁测试以验证你对问题的理解。<strong>注意：在解锁相应问题的测试用例之前，你将无法使用 OK 测试你的代码</strong>。</p>
        <pre><code>python3 ok -q 01 -u --local</code></pre>
        <p><strong>编写代码并检查你的工作</strong>：</p>
        <p>解锁完成后，你可以编写代码，并使用以下命令检查正确性：</p>

        <pre><code>python3 ok &#x2d;q 01 --local</code></pre>


        <button id='toggle-7' class='btn btn-outline btn-lg alwaystoggle toggle'>
          提示视频<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-7">

          <h3 id="problem-1-hint-video">Problem 1 提示视频</h3>

          <p>这个视频为解决 Hog 游戏这一阶段的问题提供了一些有用的指导。
            <br>

            <iframe width="560" height="315"
              src="//player.bilibili.com/player.html?isOutside=true&aid=427281261&bvid=BV1s3411G7yM&cid=753493984&p=10&autoplay=0&t=180"
              scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"></iframe>
        </div>
        </p>


        <button id='toggle-8' class='btn btn-outline btn-lg alwaystoggle toggle'>
          调试提示<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-8">

          <p>如果测试未通过，你应该进行调试。你可以直接使用 Python 观察函数的行为。首先，启动 Python 解释器并加载 <code>hog.py</code> 文件。</p>

          <pre><code>python3 -i hog.py</code></pre>

          <p>然后，你可以调用 <code>roll_dice</code> 函数，传入任意数量的骰子。<code>roll_dice</code> 函数有一个默认参数值
            <code>dice</code>，它是一个随机的六面骰子函数。因此，以下对 <code>roll_dice</code> 的调用模拟了掷四个公平的六面骰子。
          </p>

          <pre><code>&gt;&gt;&gt; roll_dice(4)</code></pre>

          <p>你会发现，每次调用上面的表达式时，结果可能会有所不同，因为它模拟随机掷骰子。你也可以使用测试骰子来提前固定骰子的结果。例如，当你知道骰子将出现 3 和 4 时，掷两次应该得到总结果 7。</p>

          <pre><code>&gt;&gt;&gt; fixed_dice = make_test_dice(3, 4)
&gt;&gt;&gt; roll_dice(2, fixed_dice)
7</code></pre>

          <blockquote>
            <p>在大多数系统上，你可以通过按上箭头键( ↑ )，然后按回车键来重新计算相同的表达式。要运行更早的命令，请反复按上箭头键。</p>

            <p>如果发现问题，你需要修改 <code>hog.py</code> 文件，保存文件，重新启动 Python，然后重新计算表达式。即使重新启动
              Python，按上箭头键也能让你访问之前的表达式。</p>
          </blockquote>

          <p>继续调试你的代码并运行 <code>ok</code> 测试，直到它们全部通过。你应该遵循这个理解问题、实现解决方案、测试和调试的过程来解决这个项目中的所有问题。</p>

          <blockquote>
            <p>另一个调试提示：要在 <code>ok</code> 测试失败时自动启动交互式解释器，请使用
              <code>-i</code>。例如，<code>python3 ok -q 01 -i --local</code>
              将运行问题1的测试，然后在测试失败时启动一个加载了 <code>hog.py</code> 的交互式解释器。
            </p>
          </blockquote>

        </div>


        <h3 id="problem-2-1-pt">Problem 2 (1 分)</h3>

        <p>实现 <code>free_bacon</code> 函数，它接受对手当前的 <code>score</code> 并返回掷 0 次骰子所得的分数。假设 <code>score</code> 小于 100。</p>


        <blockquote>
          <p>Free Bacon 规则:</p>
        </blockquote>

        <ul>
          <li>
            <p><strong>Free Bacon</strong>。选择掷零个骰子的玩家将获得 <code>k+3</code> 分，其中 <code>k</code> 是 π 的小数点后第 <code>n</code>
              位数字，<code>n</code> 是对手的总分。作为一个特殊情况，如果对手的得分是 <code>n = 0</code>，那么 <code>k = 3</code>（π小数点前的数字）。
            </p>


            <button id='toggle-9' class='btn btn-outline btn-lg alwaystoggle toggle'>
              示例<noscript> (enable JavaScript)</noscript>
            </button>
            <div class="solution toggle-9">

              <ul>
                <li><em>示例 1</em>：对手的得分为 0，当前玩家掷零个骰子。当前玩家将获得 <code>3 + 3 = 6</code> 分。</li>
                <li><em>示例 2</em>：对手的得分为 1，当前玩家掷零个骰子。当前玩家将获得 <code>1 + 3 = 4</code> 分。</li>
                <li><em>示例 3</em>：对手的得分为 2，当前玩家掷零个骰子。当前玩家将获得 <code>4 + 3 = 7</code> 分。</li>
                <li><em>示例 4</em>：对手的得分为 42，当前玩家掷零个骰子。当前玩家将获得 <code>9 + 3 = 12</code> 分。</li>
              </ul>

            </div>
          </li>
        </ul>


        <p>提供的代码中包含了一个整数 <code>FIRST_101_DIGITS_OF_PI</code>，它存储了 <code>pi</code>。解决这个问题的一种方法是将 <code>pi</code>
          截断到只有 <code>score+1</code> 位数字，然后返回 <code>pi</code> 的最后一位数字加上 3。</p>

        <p><strong>提示：</strong> 一个整数 <code>n</code> 如果小于 <code>pow(10, k+1)</code> 但大于或等于 <code>pow(10, k)</code>，则它有
          <code>k+1</code> 位数字。
        </p>

        <p>你可以以任何你想要的方式实现这个函数。你不必遵循这个推荐的方法或使用提供的起始代码。然而，<strong>你不能在实现中使用 for 循环或方括号 <code>[</code>
            <code>]</code>，因为我们还没有讲到这些内容。</strong></p>

        <p>在编写代码之前，你需要解锁测试以验证你对问题的理解。</p>
        <pre><code class="hljs">python3 ok -q 02 -u --local</code></pre>
        <p>解锁完成后，你可以编写代码，并使用以下命令检查正确性：</p>
        <pre><code class="hljs">python3 ok -q 02 --local</code></pre>

        <p>You can also test <code>free_bacon</code> interactively by entering <code>python3 &#x2d;i hog.py</code> in
          the terminal and then calling <code>free_bacon</code> with various inputs.</p>
        <p>你也可以通过在终端中输入 <code>python3 -i hog.py</code> 以交互方式测试 <code>free_bacon</code> 函数，你可以使用不同的输入来调用
          <code>free_bacon</code> 函数。
        </p>

        <button id='toggle-10' class='btn btn-outline btn-lg alwaystoggle toggle'>
          提示视频<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-10">

          <h3 id="problem-2-hint-video">Problem 2 提示视频</h3>

          <p>这个视频为解决 Hog 游戏这一阶段的问题提供了一些有用的指导。
            <br>

            <iframe width="560" height="315"
              src="//player.bilibili.com/player.html?isOutside=true&aid=427281261&bvid=BV1s3411G7yM&cid=753493984&p=10&autoplay=0&t=568"
              scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"></iframe>
        </div>
        </p>


        <h3 id="problem-3-2-pt">Problem 3 (2 分)</h3>


        <p>Implement the <code>take_turn</code> function, which returns the number of points scored
          for a turn by rolling the given <code>dice</code> <code>num_rolls</code> times.</p>

        <p>Your implementation of <code>take_turn</code> should call both <code>roll_dice</code> and
          <code>free_bacon</code>
          when possible.
        </p>
        <p>实现 <code>take_turn</code> 函数，该函数返回通过掷 <code>dice</code> 函数 <code>num_rolls</code> 次所得的分数。</p>

        <p>你的 <code>take_turn</code> 实现应在可能的情况下调用 <code>roll_dice</code> 和 <code>free_bacon</code>。</p>

        <p>在编写代码之前，你需要解锁测试以验证你对问题的理解。</p>
        <pre><code class="hljs">python3 ok -q 03 -u --local</code></pre>
        <p>解锁完成后，你可以编写代码，并使用以下命令检查正确性：</p>
        <pre><code class="hljs">python3 ok -q 03 --local</code></pre>


        <button id='toggle-11' class='btn btn-outline btn-lg alwaystoggle toggle'>
          提示视频<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-11">

          <h3 id="problem-3-hint-video">Problem 3 提示视频</h3>

          <p>这个视频为解决 Hog 游戏这一阶段的问题提供了一些有用的指导。
            <br>

            <iframe width="560" height="315"
              src="//player.bilibili.com/player.html?isOutside=true&aid=427281261&bvid=BV1s3411G7yM&cid=753493984&p=10&autoplay=0&t=850"
              scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"></iframe>
        </div>
        </p>


        <h3 id="problem-4a-1-pt">Problem 4a (1 分)</h3>

        <p>实现 <code>swine_align</code> 函数，该函数接受当前玩家和对手的得分，并返回当前玩家是否会因为 Swine Align 规则而再进行一次回合。<strong>注意：</strong>
          在某一玩家得分为 0 的特殊情况下，返回 <code>False</code>。</p>
        <blockquote>
          <p>Swine Align 规则:</p>
        </blockquote>

        <ul>
          <li>
            <p><strong>Swine Align</strong>。在本回合得分加到当前玩家的总分后，如果两名玩家的得分都为正且当前玩家的得分与对手的得分的最大公约数（GCD）至少为10，则当前玩家再进行一次回合。
            </p>


            <button id='toggle-12' class='btn btn-outline btn-lg alwaystoggle toggle'>
              示例<noscript> (enable JavaScript)</noscript>
            </button>
            <div class="solution toggle-12">

              <ul>
                <li><em>示例 1</em>：在第一个玩家回合结束时，两名玩家的得分分别为8和36。得分的最大公约数为4，因此第一个玩家不会因为 Swine Align 规则而再进行一次回合。</li>
                <li><em>示例 2</em>：在第一个玩家回合结束时，两名玩家的得分分别为20和30。得分的最大公约数为10，因此第一个玩家会再进行一次回合。</li>
                <li><em>示例
                    3</em>：在第一个玩家回合结束时，两名玩家的得分分别为24和36。得分的最大公约数为12，因此第一个玩家会再进行一次回合。第一个玩家掷出12点，得分变为36和36。得分的最大公约数为36，因此第一个玩家会再进行一次回合。
                </li>
                <li><em>示例 4</em>：在第一个玩家回合结束时，两名玩家的得分分别为15和0。Swine Align 规则仅在两名玩家的得分都为正时适用（不为零），因此第一个玩家不会因为 Swine Align
                  规则而再进行一次回合。</li>
              </ul>

            </div>
          </li>
        </ul>

        <blockquote>
          <p><strong>提示</strong>：当且仅当 <code>n</code> 是 <code>d</code> 的倍数时,表达式 <code>n % d == 0</code> 的值为真。</p>
        </blockquote>

        <p>在编写代码之前，你需要解锁测试以验证你对问题的理解。</p>
        <pre><code class="hljs">python3 ok -q 04a -u --local</code></pre>
        <p>解锁完成后，你可以编写代码，并使用以下命令检查正确性：</p>
        <pre><code class="hljs">python3 ok -q 04a --local</code></pre>


        <button id='toggle-13' class='btn btn-outline btn-lg alwaystoggle toggle'>
          提示视频<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-13">

          <h3 id="problem-4a-hint-video">Problem 4a 提示视频</h3>

          <p>这个视频为解决 Hog 游戏这一阶段的问题提供了一些有用的指导。
            <br>

            <iframe width="560" height="315"
              src="//player.bilibili.com/player.html?isOutside=true&aid=427281261&bvid=BV1s3411G7yM&cid=753493984&p=10&autoplay=0&t=962"
              scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"></iframe>
        </div>
        </p>


        <h3 id="problem-4b-1-pt">Problem 4b (1 分)</h3>


        <p>实现 <code>pig_pass</code> 函数，该函数接受当前玩家和对手的得分，并返回当前玩家是否会因为 Pig Pass 规则而再进行一次回合。</p>

        <blockquote>
          <p>Pig Pass 规则:</p>
        </blockquote>

        <ul>
          <li>
            <p><strong>Pig Pass</strong>。在本回合得分加到当前玩家的总分后，如果当前玩家的得分低于对手的得分且两者之间的差值小于3，则当前玩家再进行一次回合。</p>


            <button id='toggle-14' class='btn btn-outline btn-lg alwaystoggle toggle'>
              示例<noscript> (enable JavaScript)</noscript>
            </button>
            <div class="solution toggle-14">

              <ul>
                <li><em>示例 1</em>：回合结束时，当前玩家的得分为11，对手的得分为10，。由于11 > 10，当前玩家不会因为 Pig Pass 规则而再进行一次回合。</li>
                <li><em>示例 2</em>：回合结束时，当前玩家的得分为7，对手的得分为10。因为 <code>10 - 7 = 3 >= 3</code>，当前玩家不会因为 Pig Pass
                  规则而再进行一次回合。</li>
                <li><em>示例 3</em>：回合结束时，当前玩家的得分为28，对手的得分为30。因为 <code>30 - 28 = 2 < 3</code>，当前玩家会再进行一次回合。</li>
                <li><em>示例 4</em>：回合结束时，当前玩家的得分为28，对手的得分为30。与示例3类似，当前玩家会再进行一次回合。如果当前玩家掷出1点，得分变为29，Pig Pass
                  规则再次生效，当前玩家会再进行一次回合。</li>
              </ul>

            </div>
          </li>
        </ul>

        <p>在编写代码之前，你需要解锁测试以验证你对问题的理解。</p>
        <pre><code class="hljs">python3 ok -q 04b -u --local</code></pre>
        <p>解锁完成后，你可以编写代码，并使用以下命令检查正确性：</p>
        <pre><code class="hljs">python3 ok -q 04b --local</code></pre>


        <button id='toggle-15' class='btn btn-outline btn-lg alwaystoggle toggle'>
          提示视频<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-15">

          <h3 id="problem-4b-hint-video">Problem 4b 提示视频</h3>

          <p>这个视频为解决 Hog 游戏这一阶段的问题提供了一些有用的指导。
            <br>

            <iframe width="560" height="315"
              src="//player.bilibili.com/player.html?isOutside=true&aid=427281261&bvid=BV1s3411G7yM&cid=753493984&p=10&autoplay=0&t=1298"
              scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"></iframe>
        </div>
        </p>


        <h3 id="problem-5-3-pt">Problem 5 (3 分)</h3>

        <p>实现 <code>play</code> 函数，该函数模拟完整的 Hog 游戏。玩家轮流掷骰子，直到其中一名玩家达到 <code>goal</code> 分数。</p>
        <p>为了确定每回合掷多少骰子，每个玩家使用他们各自的策略（玩家 0 使用 <code>strategy0</code>，玩家 1 使用 <code>strategy1</code>）。<em>strategy</em>
          是一个函数，给定玩家的得分和对手的得分，返回当前玩家在该回合中将掷的骰子数量。<strong>每回合只调用一次 strategy 函数（否则可能会破坏 GUI）。</strong> 不用担心 strategy
          的实现，你将在第三阶段完成它。</p>
        <p>当游戏结束时，<code>play</code> 返回两名玩家的最终总得分，玩家 0 的得分在前，玩家 1 的得分在后。</p>
        <p>提示：</p>
        <ul>
          <li>你应该调用你已经实现的函数。</li>
          <li>调用 <code>take_turn</code> 时传入三个参数。每回合只调用一次 <code>take_turn</code>。</li>
          <li>调用 <code>extra_turn</code> 来确定当前玩家是否会因为 Swine Align 或 Pig Pass 规则而再进行一次回合。</li>
          <li>你可以通过调用提供的函数 <code>other</code> 来获取另一名玩家的编号（0 或 1）。</li>
          <li>你可以暂时忽略 <code>play</code> 函数的 <code>say</code> 参数。你将在项目的第二阶段使用它。</li>
        </ul>
        <p><strong>规则澄清</strong>：一个玩家可以连续进行超过两次回合。例如，如果他们第一次回合后的得分是 10 比 20，他们会因为 Swine Align 规则再进行一次回合。如果他们得了 8 分，现在得分是
          18 比 20，他们会因为 Pig Pass 规则再进行第三次回合。如果他们得了 12 分，现在得分是 30 比 20，他们会再进行第四次回合。</p>
        <p><strong>注意</strong>：Swine Align 和 Pig Pass 规则不可能同时生效。</p>
        <p>在编写代码之前，你需要解锁测试以验证你对问题的理解。</p>
        <pre><code class="hljs">python3 ok -q 05 -u --local</code></pre>
        <p>解锁完成后，你可以编写代码，并使用以下命令检查正确性：</p>
        <pre><code class="hljs">python3 ok -q 05 --local</code></pre>

        <p>完成后，你将能够玩游戏的图形版本。我们提供了一个名为 <code>hog_gui.py</code> 的文件，你可以在终端中运行：</p>
        <pre><code>python3 hog_gui.py</code></pre>
        <p>GUI 依赖于你的实现，所以如果你的代码中有任何错误，它们将在 GUI 中反映出来。这意味着你也可以使用 GUI 作为调试工具；然而，最好先运行测试。</p>

        <p>Make sure to submit your work so far before the checkpoint deadline:</p>

        <pre><code>python3 ok &#x2d;&#x2d;submit</code></pre>

        <p>Check to make sure that you did all the problems in Phase 1:</p>

        <pre><code>python3 ok &#x2d;&#x2d;score</code></pre>


        <button id='toggle-16' class='btn btn-outline btn-lg alwaystoggle toggle'>
          提示视频<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-16">

          <h3 id="problem-5-hint-video">Problem 5 提示视频</h3>

          <p>这个视频为解决 Hog 游戏这一阶段的问题提供了一些有用的指导。
            <br>

            <iframe width="560" height="315"
              src="//player.bilibili.com/player.html?isOutside=true&aid=427281261&bvid=BV1s3411G7yM&cid=753493984&p=10&autoplay=0&t=1504"
              scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"></iframe>
        </div>
        </p>

        <p>恭喜你！你已经完成了这个项目的Phase 1！</p>

        <h2 id="phase-2-commentary">Phase 2: 评论</h2>

        <p>在第二阶段，你将实现评论函数，这些函数会在每个回合后打印关于游戏的评论，例如，<code>"22 分！这是玩家1 迄今为止最大的得分！"</code></p>

        <p>commentary 函数接受两个参数，玩家0 的当前得分和玩家1
          的当前得分。它可以基于当前得分和其父环境中的任何其他信息打印评论。由于评论可能会根据游戏中的当前得分情况在每个回合中有所不同，commentary
          函数总是返回另一个 commentary 函数，以便在下一个回合中调用。commentary 函数的唯一副作用应该是打印。
        </p>

        <h3 id="commentary-examples">评论示例</h3>

        <p><code>hog.py</code> 中的 <code>say_scores</code> 函数是一个 commentary 函数的示例，它宣布两名玩家的得分。注意，<code>say_scores</code>
          返回它自己，这意味着每个回合都会调用相同的 commentary 函数。</p>

        <pre><code>def say_scores(score0, score1):
    &quot;&quot;&quot;A commentary function that announces the score for each player.&quot;&quot;&quot;
    print(&quot;Player 0 now has&quot;, score0, &quot;and Player 1 now has&quot;, score1)
    return say_scores</code></pre>

        <p>The function <code>announce_lead_changes</code> is an example of a higher-order function
          that returns a commentary function that tracks lead changes. A different
          commentary function will be called each turn.</p>

        <pre><code>def announce_lead_changes(last_leader=None):
    &quot;&quot;&quot;Return a commentary function that announces lead changes.

    &gt;&gt;&gt; f0 = announce_lead_changes()
    &gt;&gt;&gt; f1 = f0(5, 0)
    Player 0 takes the lead by 5
    &gt;&gt;&gt; f2 = f1(5, 12)
    Player 1 takes the lead by 7
    &gt;&gt;&gt; f3 = f2(8, 12)
    &gt;&gt;&gt; f4 = f3(8, 13)
    &gt;&gt;&gt; f5 = f4(15, 13)
    Player 0 takes the lead by 2
    &quot;&quot;&quot;
    def say(score0, score1):
        if score0 &gt; score1:
            leader = 0
        elif score1 &gt; score0:
            leader = 1
        else:
            leader = None
        if leader != None and leader != last_leader:
            print(&#x27;Player&#x27;, leader, &#x27;takes the lead by&#x27;, abs(score0 &#x2d; score1))
        return announce_lead_changes(leader)
    return say</code></pre>

        <p>你还应该理解 <code>both</code> 函数，它接受两个 commentary 函数（<code>f</code> 和
          <code>g</code>），并返回一个<em>新的</em> commentary 函数。这个返回的 commentary 函数会返回<em>另一个</em> commentary 函数，该函数按顺序调用
          <code>f</code> 和 <code>g</code>
          返回的函数。
        </p>
        <pre><code>def both(f, g):
    &quot;&quot;&quot;Return a commentary function that says what f says, then what g says.

    NOTE: the following game is not possible under the rules, it&#x27;s just
    an example for the sake of the doctest

    &gt;&gt;&gt; h0 = both(say_scores, announce_lead_changes())
    &gt;&gt;&gt; h1 = h0(10, 0)
    Player 0 now has 10 and Player 1 now has 0
    Player 0 takes the lead by 10
    &gt;&gt;&gt; h2 = h1(10, 8)
    Player 0 now has 10 and Player 1 now has 8
    &gt;&gt;&gt; h3 = h2(10, 17)
    Player 0 now has 10 and Player 1 now has 17
    Player 1 takes the lead by 7
    &quot;&quot;&quot;
    def say(score0, score1):
        return both(f(score0, score1), g(score0, score1))
    return say</code></pre>


        <button id='toggle-17' class='btn btn-outline btn-lg alwaystoggle toggle'>
          提示视频<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-17">

          <h3 id="phase-2-hint-video">Phase 2 提示视频</h3>

          <p>This video provides some helpful direction for tackling the problems on this phase of Hog.
            <br>

            <iframe width="560" height="315"
              src="//player.bilibili.com/player.html?isOutside=true&aid=427281261&bvid=BV1s3411G7yM&cid=753493984&p=10&autoplay=0&t=2087"
              scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"></iframe>
        </div>
        </p>


        <h3 id="problem-6-2-pt">Problem 6 (2 分)</h3>

        <p>更新你的 <code>play</code> 函数，使其在每个回合结束时调用一个 commentary 函数。调用 commentary 函数的返回值将是下一个回合要调用的 commentary 函数。</p>

        <p>例如，<code>say(score0, score1)</code> 应该在第一个回合结束时被调用。它的返回值（另一个评论函数）应该在第二个回合结束时被调用。每个连续的回合，调用前一个回合的 commentary
          函数返回的函数。
        </p>
        <p>在编写代码之前，你需要解锁测试以验证你对问题的理解。</p>
        <pre><code class="hljs">python3 ok -q 06 -u --local</code></pre>
        <p>解锁完成后，你可以编写代码，并使用以下命令检查正确性：</p>
        <pre><code class="hljs">python3 ok -q 06 --local</code></pre>


        <h3 id="problem-7-3-pt">Problem 7 (3 分)</h3>

        <p>实现 <code>announce_highest</code> 函数，这是一个高阶函数，返回一个 commentary 函数。该 commentary
          函数会在特定玩家在一轮中获得的分数超过以往任何一轮时进行播报。例如，<code>announce_highest(1)</code> 会完全忽略玩家0，仅打印关于玩家1 的信息。（它的返回值也是如此；另一个仅关于玩家1
          的评论函数。）为了计算分数的增加，它需要将上一轮的分数（<code>last_score</code>）与当前轮的分数进行比较，感兴趣的玩家由 <code>who</code>
          参数指定。此函数还必须跟踪该玩家迄今为止的最高分数增加，该值存储为 <code>running_high</code>。</p>

        <p><code>announce_highest</code> 的播报方式非常具体，你的实现应与提供的 doctests 匹配。在播报分数增加时，不必担心单复数问题；你只需在两种情况下都使用“point(s)”。</p>

        <blockquote>
          <p><strong>提示：</strong> 提供给您的 <code>announce_lead_changes</code> 函数是一个如何使用 commentary 函数跟踪信息的示例。如果你卡住了，请先确保你理解
            <code>announce_lead_changes</code> 的工作原理。
          </p>
        </blockquote>

        <br>

        <blockquote>
          <p><strong>提示。</strong> 如果你遇到 <code>local variable [var] reference before assignment</code> 错误：</p>

          <p>这是因为在 Python 中，通常不允许修改父帧中定义的变量。解释器认为你试图在当前帧中定义一个新变量，而不是重新赋值
            <code>[var]</code>。我们将在未来的课程中学习如何解决这个问题，但这个问题并不需要用到这些知识。
          </p>

          <p>要解决此问题，你有两种选择：</p>

          <p>1) 与其重新赋值 <code>[var]</code>，不如创建一个新变量来保存新值。在未来的计算中使用该新变量。</p>

          <p>2) 对于这个问题，可以通过不使用赋值语句来避免此问题。可以将新值作为参数传递给 <code>announce_highest</code> 函数。</p>
        </blockquote>
        <p>在编写代码之前，你需要解锁测试以验证你对问题的理解。</p>
        <pre><code class="hljs">python3 ok -q 07 -u --local</code></pre>
        <p>解锁完成后，你可以编写代码，并使用以下命令检查正确性：</p>
        <pre><code class="hljs">python3 ok -q 07 --local</code></pre>

        <p>完成后，你将在 GUI 中看到评论：</p>

        <pre><code>python3 hog_gui.py</code></pre>

        <p>GUI 中的评论是通过将以下函数作为 <code>play</code> 的 <code>say</code> 参数传递生成的。</p>

        <pre><code>both(announce_highest(0), both(announce_highest(1), announce_lead_changes()))</code></pre>

        <p>恭喜你！你已经完成了这个项目的Phase 2！</p>


        <h2 id="phase-3-strategies">Phase 3: 策略</h2>


        <p>在第三阶段，你将尝试在总是投掷固定数量骰子的策略之上开发更好的策略。首先，你需要开发一些工具来评估策略的好坏。</p>


        <button id='toggle-18' class='btn btn-outline btn-lg alwaystoggle toggle'>
          提示视频<noscript> (enable JavaScript)</noscript>
        </button>
        <div class="solution toggle-18">

          <h3 id="phase-3-hint-video">Phase 3 提示视频</h3>

          <p>This video provides some helpful direction for tackling the problems on this phase of Hog.
            <br>

            <iframe width="560" height="315"
              src="//player.bilibili.com/player.html?isOutside=true&aid=427281261&bvid=BV1s3411G7yM&cid=753493984&p=10&autoplay=0&t=3123"
              scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"></iframe>
        </div>
        </p>


        <h3 id="problem-8-2-pt">Problem 8 (2 分)</h3>


        <p>实现 <code>make_averaged</code> 函数，这是一个高阶函数，它接受一个函数 <code>original_function</code> 作为参数。它返回另一个函数，该函数接受与
          <code>original_function</code> 相同数量的参数（即最初传递给 <code>make_averaged</code>
          的函数）。返回的函数与输入函数的不同之处在于，它返回的是在相同参数下重复调用 <code>original_function</code> 的平均值。该函数应总共调用
          <code>original_function</code> <code>trials_count</code> 次，并返回结果的平均值。
        </p>

        <p>为了实现这个函数，你需要使用一个新的 Python 语法！你需要编写一个函数，该函数接受任意数量的参数，然后使用这些参数调用另一个函数。以下是它的工作原理。</p>

        <p>你可以使用 <code>*args</code> 来代替列出函数的形参。要使用这些参数调用另一个函数，你可以再次使用 <code>*args</code> 调用它。例如：</p>

        <pre><code>&gt;&gt;&gt; def printed(f):
...     def print_and_return(*args):
...         result = f(*args)
...         print(&#x27;Result:&#x27;, result)
...         return result
...     return print_and_return
&gt;&gt;&gt; printed_pow = printed(pow)
&gt;&gt;&gt; printed_pow(2, 8)
Result: 256
256
&gt;&gt;&gt; printed_abs = printed(abs)
&gt;&gt;&gt; printed_abs(&#x2d;10)
Result: 10
10</code></pre>
        <p>请仔细阅读 <code>make_averaged</code> 的 docstring，并理解它应该如何工作的。</p>
        <p>在编写代码之前，你需要解锁测试以验证你对问题的理解。</p>
        <pre><code class="hljs">python3 ok -q 08 -u --local</code></pre>
        <p>解锁完成后，你可以编写代码，并使用以下命令检查正确性：</p>
        <pre><code class="hljs">python3 ok -q 08 --local</code></pre>


        <h3 id="problem-9-2-pt">Problem 9 (2 分)</h3>

        实现 <code>max_scoring_num_rolls</code> 函数，该函数通过实验来确定在1到10次掷骰中，哪一种次数能使一个回合的平均得分最大化。你的实现应使用
        <code>make_averaged</code> 和 <code>roll_dice</code> 函数。
        </p>
        <p>如果有两种掷骰次数获得相同的最大平均得分，则返回较小的次数。例如，如果3次和6次掷骰都达到了最大平均得分，则返回3。</p>

        <p>在编写代码之前，你需要解锁测试以验证你对问题的理解。</p>
        <pre><code class="hljs">python3 ok -q 09 -u --local</code></pre>
        <p>解锁完成后，你可以编写代码，并使用以下命令检查正确性：</p>
        <pre><code class="hljs">python3 ok -q 09 --local</code></pre>

        <p>要在随机骰子上运行此实验，请使用 <code>&#x2d;r</code> 选项调用 <code>run_experiments</code>：</p>

        <pre><code>python3 hog.py &#x2d;r</code></pre>

        <p><strong>运行实验</strong>
          在本项目的剩余部分，你可以根据需要更改 <code>run_experiments</code> 的实现。通过调用 <code>average_win_rate</code>，你可以评估各种Hog策略。例如，将第一个
          <code>if False:</code> 更改为 <code>if True:</code>，以评估 <code>always_roll(8)</code> 与基础策略
          <code>always_roll(6)</code>。
        </p>

        <p>某些实验可能需要长达几分钟的时间才能完成。你可以通过减少<code>make_averaged</code>中调用试验的次数来加快实验速度。</p>

        <p>运行实验不会影响你在项目中的得分。</p>


        <h3 id="problem-10-1-pt">Problem 10 (1 分)</h3>


        <p>一种策略可以通过在最有利时掷 0 次骰子来利用 <em>Free Bacon</em> 规则。请实现 <code>bacon_strategy</code> 函数，当掷 0
          次骰子能够获得<strong>至少</strong>
          <code>cutoff</code> 分时返回 0，否则返回 <code>num_rolls</code>。
        </p>

        <p>在编写代码之前，你需要解锁测试以验证你对问题的理解。</p>
        <pre><code class="hljs">python3 ok -q 10 -u --local</code></pre>
        <p>解锁完成后，你可以编写代码，并使用以下命令检查正确性：</p>
        <pre><code class="hljs">python3 ok -q 10 --local</code></pre>

        <p>Once you have implemented this strategy, change <code>run_experiments</code> to evaluate
          your new strategy against the baseline. Is it better than just rolling 4?</p>
        <p>实现了这个策略后，修改 <code>run_experiments</code> 以评估你的新策略与基础策略。它是否比仅仅掷 4 次骰子更好？</p>

        <h3 id="problem-11-2-pt">Problem 11 (2 分)</h3>


        <p>一种策略还可以利用 <em>Pig Pass</em> 和 <em>Swine Align</em> 规则。在可以触发额外回合时，这种额外回合策略总是选择掷 0 次骰子。在其他情况下，如果掷 0
          次骰子能够获得<strong>至少</strong> <code>cutoff</code> 分，则掷 0 次骰子。否则，该策略掷 <code>num_rolls</code> 次骰子。</p>

        <blockquote>
          <p><strong>提示</strong>: 你可以使用在 Problem 10 中定义的 <code>bacon_strategy</code> 函数</p>
        </blockquote>

        <p>在编写代码之前，你需要解锁测试以验证你对问题的理解。</p>
        <pre><code class="hljs">python3 ok -q 11 -u --local</code></pre>
        <p>解锁完成后，你可以编写代码，并使用以下命令检查正确性：</p>
        <pre><code class="hljs">python3 ok -q 11 --local</code></pre>

        <p>Once you have implemented this strategy, update <code>run_experiments</code> to evaluate
          your new strategy against the baseline. You should find that it gives a
          significant edge over <code>always_roll(4)</code>.</p>
        <p>实现了这个策略之后，修改 <code>run_experiments</code> 以评估你的新策略与基础策略。你会发现它比 <code>always_roll(4)</code> 策略有显著的优势。</p>

        <h3 id="optional-problem-12-0-pt">可选: Problem 12 (0 分)</h3>


        <ul>
          <li><code>extra_turn_strategy</code> 是一个很好的默认策略。</li>
          <li>得分超过 100 分没有意义。检查你是否可以通过掷 0、1 或 2 次骰子获胜。如果你处于领先地位，你可能需要降低风险。</li>
          <li>尝试总是触发额外回合。</li>
          <li>仔细选择 <code>num_rolls</code> 和 <code>cutoff</code> 参数。</li>
          <li>选择最有可能赢得游戏的操作。</li>
        </ul>

        <p>你可以通过运行 Ok 来检查你的最终策略是否有效。</p>
        <pre><code class="hljs">python3 ok -q 12 --local</code></pre>

        <p>你最终还可以通过运行以下命令来检查你的最终胜率：</p>
        <pre><code>python3 calc.py</code></pre>
        <p>这将弹出一个窗口，要求你确认身份，然后它会打印出你的最终策略的胜率。</p>
        <p>此时，运行整个自动评分器，查看是否有任何测试未通过。</p>
        <pre><code>python3 ok &#x2d;&#x2d;local</code></pre>
        <p>一旦你满意了，提交到 Ok 以完成项目。</p>

        <pre><code>python3 ok &#x2d;&#x2d;submit</code></pre>

        <p><strong>If you have a partner, make sure to add them to the submission on okpy.org.</strong></p>

        <p>Check to make sure that you did all the problems by running</p>

        <pre><code>python3 ok &#x2d;&#x2d;score</code></pre>

        <p>You can also play against your final strategy with the graphical user
          interface:</p>

        <pre><code>python3 hog_gui.py</code></pre>

        <p>The GUI will alternate which player is controlled by you.</p>

        <p>Congratulations, you have reached the end of your first CS 61A project! If you
          haven't already, relax and enjoy a few games of Hog with a friend.</p>

        <div>
          <script>
            const scriptTag = document.currentScript;
            window.addEventListener("load", async () => {
              const parentNode = scriptTag.parentNode;
              let pos = parentNode.nextElementSibling;

              const path = pos.innerText;

              pos = pos.nextElementSibling;
              pos.previousElementSibling.remove();

              const probe = await fetch(path);

              if (!probe.ok) {
                // section should not be displayed yet

                // iterate until a section is found
                while (pos && !pos.tagName.startsWith("H")) {
                  pos = pos.nextElementSibling;
                }

                if (!pos) {
                  // no section to delete
                  return;
                }

                // the tag to look for indicating a new section
                const level = pos.tagName;
                const name = pos.id;

                // remove links
                for (const link of document.querySelectorAll(`a[href="#${name}"]`)) {
                  if (link.parentElement.nextElementSibling && link.parentElement.nextElementSibling.tagName
                    === "UL") {
                    link.parentElement.nextElementSibling.remove(); // remove child links
                  }
                  link.parentElement.remove();
                }

                // remove header
                pos = pos.nextElementSibling;
                pos.previousElementSibling.remove();

                // keep destroying siblings until another section at the same level is hit
                while (pos && (pos.tagName.startsWith("h") || pos.tagName === "P") && pos.tagName !==
                  level) {
                  pos = pos.nextElementSibling;
                  pos.previousElementSibling.remove();
                }
              }

              // self-destruct
              scriptTag.parentNode.remove();
            });
          </script>
        </div>

        <p>/proj/hog_contest</p>


        <h2 id="hog-strategy-contest">Hog Strategy Contest</h2>


        <p>If you're interested, you can take your implementation of Hog one step further by participating in the Hog
          Contest, where you play your <code>final_strategy</code> against those of other students. The winning
          strategies will receive extra credit and will be recognized in future semesters!</p>

        <p>To see more, read the <a href="../../proj/hog_contest">contest description</a>. Or simply check out the <a
            href="https://hog-contest.cs61a.org">leaderboard</a>.</p>

        <script>
          /*
          This code is duplicated in lab-check-in.html. Doesn't work if we move it to a separate
          file because of JQuery document ready concurrency issues.
          */
          $(function () {
            $('.alwaystoggle').css('display', 'inline-block');
            $('.alwaystoggle').click(function () {
              var solution_id = $(this).attr('id');
              $('div.' + solution_id).slideToggle(600);
            });
          });
        </script>

        <script>
          $("#cats_typing").hover(
            function () {
              $("#cats_typing").attr("src", "images/cats_typing.gif");
            },
            function () {
              $("#cats_typing").attr("src", "images/cats_typing_still.gif");
            }
          );
        </script>



      </div>

      <div class='col-md-3 sticky'>
        <nav class='hidden-print hidden-sm hidden-xs sidebar'>
          <ul>
            <li><a href="#introduction">介绍</a></li>
            <ul>
              <li><a href="#rules">规则</a></li>
            </ul>
            <li><a href="#final-product">最终成果</a></li>
            <li><a href="#download-starter-files">下载初始文件</a></li>
            <li><a href="#logistics">项目安排与提交</a></li>
            <li><a href="#graphical-user-interface">图形用户界面</a></li>
            <li><a href="#phase-1-simulator">Phase 1: 模拟器</a></li>
            <ul>
              <li><a href="#problem-0-0-pt">Problem 0 (0 分)</a></li>
              <li><a href="#problem-0-hint-video">Problem 0 提示视频</a></li>
              <li><a href="#problem-1-2-pt">Problem 1 (2 分)</a></li>
              <li><a href="#problem-1-hint-video">Problem 1 提示视频</a></li>
              <li><a href="#problem-2-1-pt">Problem 2 (1 分)</a></li>
              <li><a href="#problem-2-hint-video">Problem 2 提示视频</a></li>
              <li><a href="#problem-3-2-pt">Problem 3 (2 分)</a></li>
              <li><a href="#problem-3-hint-video">Problem 3 提示视频</a></li>
              <li><a href="#problem-4a-1-pt">Problem 4a (1 分)</a></li>
              <li><a href="#problem-4a-hint-video">Problem 4a 提示视频</a></li>
              <li><a href="#problem-4b-1-pt">Problem 4b (1 分)</a></li>
              <li><a href="#problem-4b-hint-video">Problem 4b 提示视频</a></li>
              <li><a href="#problem-5-3-pt">Problem 5 (3 分)</a></li>
              <li><a href="#problem-5-hint-video">Problem 5 提示视频</a></li>
            </ul>
            <li><a href="#phase-2-commentary">Phase 2: 评论</a></li>
            <ul>
              <li><a href="#commentary-examples">评论示例</a></li>
              <li><a href="#phase-2-hint-video">Phase 2 提示视频</a></li>
              <li><a href="#problem-6-2-pt">Problem 6 (2 分)</a></li>
              <li><a href="#problem-7-3-pt">Problem 7 (3 分)</a></li>
            </ul>
            <li><a href="#phase-3-strategies">Phase 3: 策略</a></li>
            <ul>
              <li><a href="#phase-3-hint-video">Phase 3 提示视频</a></li>
              <li><a href="#problem-8-2-pt">Problem 8 (2 分)</a></li>
              <li><a href="#problem-9-2-pt">Problem 9 (2 分)</a></li>
              <li><a href="#problem-10-1-pt">Problem 10 (1 分)</a></li>
              <li><a href="#problem-11-2-pt">Problem 11 (2 分)</a></li>
              <li><a href="#optional-problem-12-0-pt">可选: Problem 12 (0 分)</a></li>
            </ul>
            <li><a href="#hog-strategy-contest">Hog Strategy Contest</a></li>
          </ul>
        </nav>
      </div>
    </div>

  </main>

  <footer class="container">
    <div class="row text-center">
      <div class="col col-sm-4">
        <h3><a href="../../">CS 61A</a></h3>
        <ul class="nav nav-pills nav-stacked">
          <li><a href="../../weekly.html">Weekly Schedule</a></li>
          <li><a href="../../office-hours.html">Office Hours</a></li>
          <li><a href="../../staff.html">Staff</a></li>
        </ul>
      </div>
      <div class="col col-sm-4">
        <h3><a href="../../resources.html">Resources</a></h3>
        <ul class="nav nav-pills nav-stacked">
          <li><a href="../../articles/studying.html">Studying Guide</a></li>
          <li><a href="../../articles/debugging.html">Debugging Guide</a></li>
          <li><a href="../../articles/composition.html">Composition Guide</a></li>
        </ul>
      </div>
      <div class="col col-sm-4">
        <h3><a href="../../articles/about.html">Policies</a></h3>
        <ul class="nav nav-pills nav-stacked">
          <li><a href="../../articles/about.html#assignments">Assignments</a></li>
          <li><a href="../../articles/about.html#exams">Exams</a></li>
          <li><a href="../../articles/about.html#grading">Grading</a></li>
        </ul>
      </div>
    </div>
  </footer>



  <script src="../../assets/js/sketchy.js"></script>
  <script>
    $('.sidebar ul').addClass('nav nav-stacked noselect');
    $('body').scrollspy({
      target: '.sidebar',
      offset: 40
    });

    function goToId(id) {
      var target = $(id);
      target.parent().show();
      $('html,body').animate({
        scrollTop: target.offset().top,
      }, 100);
      $("body").scrollspy('refresh');
    }

    if (location.hash) {
      setTimeout(function () {
        if (location.hash) {
          goToId(location.hash);
        }
      }, 1);
    }

    $("a").click(function (event) {
      var urlBeforeHashRegEx = new RegExp("^" + window.location.href.split("#")[0]);
      if (/^#/.test(this.hash) && urlBeforeHashRegEx.test(this.href)) {
        event.preventDefault();
        goToId(this.hash);
        document.location.hash = this.hash;
      }
    });
  </script>

</body>

</html>